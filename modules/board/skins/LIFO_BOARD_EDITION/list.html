<include target="_header.html" />
<include cond="$oDocument->isExists()" target="_read.html" />
<ul class="cTab" cond="$module_info->use_category=='Y'">
	<li class="on"|cond="!$category"><a href="{getUrl('category','','page','')}">{$lang->total}</a></li>
	<li loop="$cate_list=>$key,$val" class="on"|cond="$category==$val->category_srl"><a href="{getUrl(category,$val->category_srl,'document_srl','', 'page', '')}">{$val->title}<!--<em cond="$val->document_count">[{$val->document_count}]</em>--></a>
		<ul cond="count($val->children)">
			<li loop="$val->children=>$idx,$item" class="on_"|cond="$category==$item->category_srl"><a href="{getUrl(category,$item->category_srl,'document_srl','', 'page', '')}">{$item->title}<!--<em cond="$val->document_count">[{$item->document_count}]</em>--></a></li>
		</ul>
	</li>
</ul>
<div class="area p-2 mb-2">
<div class="board_list" id="board_list">
	<div class="clearfix" cond="$list_config">
		<div class="float-right">
			<div class="form-row m-0">
				<div class="form-group mb-2 mx-2">
				  <select class="custom-select custom-select-sm" id="ordering">
						<block loop="$list_config=>$key,$val">
							<block cond="$val->type=='no' && $val->idx==-1">
								<option selected|cond="$sort_index =='no'" value="{getUrl('sort_index','no','order_type',$order_type)}" rel="nofollow">{$lang->no}</option>
							</block>
							<block cond="$val->type=='title' && $val->idx==-1">
								<option selected|cond="$sort_index =='title'" value="{getUrl('sort_index','title','order_type',$order_type)}" rel="nofollow">{$lang->title}</option>
							</block>
							<block cond="$val->type=='nick_name' && $val->idx==-1">
								<option selected|cond="$sort_index =='nick_name'" value="{getUrl('sort_index','nick_name','order_type',$order_type)}" rel="nofollow">{$lang->nick_name}</option>
							</block>
							<block cond="$val->type=='regdate' && $val->idx==-1">
								<option selected|cond="$sort_index =='regdate'" value="{getUrl('sort_index','regdate','order_type',$order_type)}" rel="nofollow">{$lang->date}</option>
							</block>
							<block cond="$val->type=='last_update' && $val->idx==-1">
								<option selected|cond="$sort_index =='last_update'" value="{getUrl('sort_index','update_order','order_type',$order_type)}" rel="nofollow">{$lang->last_update} </option>
							</block>
							<block cond="$val->type=='last_post' && $val->idx==-1">
								<option selected|cond="$sort_index =='last_post'" value="{getUrl('sort_index','update_order','order_type',$order_type)}" rel="nofollow">{$lang->last_post}</option>
							</block>
							<block cond="$val->type=='readed_count' && $val->idx==-1">
								<option selected|cond="$sort_index =='readed_count'" value="{getUrl('sort_index','readed_count','order_type',$order_type)}" rel="nofollow">{$lang->readed_count}</option>
							</block>
							<block cond="$val->type=='voted_count' && $val->idx==-1">
								<option selected|cond="$sort_index =='voted_count'" value="{getUrl('sort_index','voted_count','order_type',$order_type)}" rel="nofollow">{$lang->voted_count}</option>
							</block>
							<block cond="$val->type=='blamed_count' && $val->idx==-1">
								<option selected|cond="$sort_index =='blamed_count'" value="{getUrl('sort_index','blamed_count','order_type',$order_type)}" rel="nofollow">{$lang->blamed_count}</option>
							</block>
							<block cond="$val->idx!=-1">
								<option selected|cond="$sort_index == $val->eid" value="{getUrl('sort_index', $val->eid, 'order_type', $order_type)}" rel="nofollow">{$val->name}</option>
							</block>
						</block>
				  </select>
					</div>
					<div class="form-group mb-2">
						<button class="btn btn-secondary btn-sm" onclick= "location =  $('#ordering').val();">정렬</button>
					</div>
				</div>
			</div>
		</div>

	<!--// 게시판 유형 -->
	<!--@if($current_module_info->default_style=='list' || !$current_module_info->default_style)-->
		<include target="./html/_list_normal.html"/>
	<!--@elseif($current_module_info->default_style=='gallery')-->
		<include target="./html/_list_gallery.html" />
	<!--@end-->
</div>


<div class="list_footer">
	<div class="form-group clearfix no-gutters">
		<div class="col col-md-auto float-left">
			<form cond="$grant->view" action="{getUrl()}" method="get" onsubmit="return procFilter(this, search)" id="board_search" class="board_search form-row" no-error-return-url="true">
				<input type="hidden" name="vid" value="{$vid}" />
				<input type="hidden" name="mid" value="{$mid}" />
				<input type="hidden" name="category" value="{$category}" />
				<div class="col-md-auto mb-2">
					<select name="search_target" class="custom-select col-md-auto">
						<option loop="$search_option=>$key,$val" value="{$key}" selected="selected"|cond="$search_target==$key">{$val}</option>
					</select>
				</div>
				<div class="col-md-auto mb-2">
					<div class="input-group ">
						<input type="text" name="search_keyword" value="{htmlspecialchars($search_keyword)}" title="{$lang->cmd_search}" class="form-control xi-magnifier" />
						<div class="input-group-append">
							<button type="submit" class="btn btn-primary" onclick="xGetElementById('board_search').submit();return false;">{$lang->cmd_search}</button>
							<a cond="$last_division" href="{getUrl('page',1,'document_srl','','division',$last_division,'last_division','')}" class="btn">{$lang->cmd_search_next}</a>
						</div>
					</div>
				</div>
			</form>
		</div>
		<div class="float-md-right no-gutters">
			<div class="btn-group col col-md-auto mb-2 ">
				<a href="{getUrl('act','dispBoardWrite','document_srl','')}" rel="nofollow" class="btn btn-success"><i class="xi-pen"></i> {$lang->cmd_write}</a>
				<a href="{getUrl('act','dispBoardTagList')}" class="btn btn-info" title="{$lang->tag}"><i class="xi-tag"></i> {$lang->tag}</a>
			</div>
			<div class="btn-group col col-md-auto mb-2 ">
				<a cond="$grant->manager" class="btn btn-secondary" href="{getUrl('act','dispBoardAdminBoardInfo')}" rel="nofollow" title="{$lang->cmd_setup}"><i class="xi-cog"></i> {$lang->cmd_setup}</a>
				<a cond="$grant->manager" class="btn btn-warning" href="{getUrl('','module','document','act','dispDocumentManageDocument')}" rel="nofollow"  onclick="popopen(this.href,'manageDocument'); return false;">{$lang->cmd_manage_document}</a>
			</div>
		</div>
	</div>
	<nav class="mt-3">
		<ul class="justify-content-center pagination" cond="$document_list || $notice_list">
			<li class="page-item pagination-prev">
				<a href="{getUrl('page','','document_srl','','division',$division,'last_division',$last_division)}" class="page-link ">&laquo;</a>
			</li>
			<block loop="$page_no=$page_navigation->getNextPage()">
				<li cond="$page!=$page_no" class="page-item">
					<a class="page-link" href="{getUrl('page',$page_no,'document_srl','','division',$division,'last_division',$last_division)}">{$page_no}</a>
				</li>
				<li cond="$page==$page_no" class="page-item active">
					<a class="page-link" href="{getUrl('page',$page_no,'document_srl','','division',$division,'last_division',$last_division)}">{$page_no}</a>
				</li>
			</block>
			<li class="page-item pagination-next">
				<a href="{getUrl('page',$page_navigation->last_page,'document_srl','','division',$division,'last_division',$last_division)}" class="page-link">&raquo;</a>
			</li>
		</ul>
	</nav>
</div>

<script type="text/javascript">
	$(document).ready(function () {
    $(".pagination").rPage();
});
</script>

<include target="_footer.html" />
