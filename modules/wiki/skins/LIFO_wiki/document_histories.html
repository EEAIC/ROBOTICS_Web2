<include target="header.html" />

<script>
    jQuery(document).ready(function($){
        var old_radios = $("input[name=old_history_srl]");
        var new_radios = $("input[name=history_srl]");

        old_radios.first().attr('checked', 'checked');

        old_radios.change(function(){
            var current_index = old_radios.index($(this));
            new_radios.slice(0, current_index + 1).css('visibility', 'visible');
            new_radios.slice(current_index + 1, new_radios.length).css('visibility', 'hidden');
        });

        new_radios.change(function(){
            var current_index = new_radios.index($(this));
            old_radios.slice(0, current_index).css('visibility', 'hidden');
            old_radios.slice(current_index, old_radios.length).css('visibility', 'visible');
        });

    });
</script>

<form method="get" action="./" no-error-return-url="true">
    <input type="hidden" name="mid" value="{$module_info->mid}" />
    <input type="hidden" name="act" value="dispWikiHistoryCompare" />
    <input type="hidden" name="document_srl" value="{$document_srl}" />
<div class="card mb-2">
    <ul class="list-group list-group-flush">
        <li class="list-group-item">
            <input type="radio" name="no_value" value="" style="visibility: hidden"/>
            <input type="radio" name="history_srl" value="" checked="checked" />
            {$oDocument->getRegdate('Y.m.d H:i:s')} 
            (<a href="{getUrl('act','dispWikiContent', 'module_srl', $module_info->module_srl,'document_srl',$oDocument->document_srl)}">{$lang->cmd_view}</a> |
            <a href="{getUrl('act','dispWikiEditPage','entry',$entry, 'document_srl', '')}">{$lang->cmd_edit}</a>
            )
            (현재 문서)
            {$oDocument->getNickName()}
            ({$oDocument->get('ipaddress')})
           
        </li>
        <!--@foreach($histories as $val)-->               
            <li class="list-group-item">
                <p class="card-text">
                    <input type="radio" name="old_history_srl" value="{$val->history_srl}" />
                    <input type="radio" name="history_srl" value="{$val->history_srl}" />                   
                    {zdate($val->regdate, 'Y.m.d H:i:s')} 
                    (<a href="#" onclick="jQuery('#historyContent{$val->history_srl}').toggleClass('hide')">{$lang->cmd_view}</a> |
                    <a href="{getUrl('act','dispWikiEditPage','history_srl',$val->history_srl)}">{$lang->restore}</a> |
                    <a href="#" onclick="getDiff('diff{$val->history_srl}',{$oDocument->document_srl},{$val->history_srl})">{$lang->diff}</a>)
                    
                    <span class="font-weight-bold">r{$val->history_srl}</span>
                    {$val->nick_name} ({$val->ipaddress})                                  
                </p>
            </li>
            <li id="historyContent{$val->history_srl}" class="hide list-group-item">					
				{nl2br(htmlspecialchars($val->content))}					
            </li>
            <li id="diff{$val->history_srl}" name="diff{$val->history_srl}" class="hide list-group-item">
            </li>			

        <!--@end-->
    </ul>
</div>

    <div class="clearfix">
        <input type="submit" class="btn btn-info float-right" value="선택 리비젼 비교" />
    </div>
</form>


<!--@if($page_navigation)-->
    <ul class="justify-content-center pagination">
		<li class="page-item pagination-prev">
			<a href="{getUrl('page','')}" class="page-link ">&laquo; {$lang->first_page}</a>
		</li>
		<block loop="$page_no=$page_navigation->getNextPage()">
			<li cond="$page!=$page_no" class="page-item">
				<a class="page-link" href="{getUrl('page',$page_no)}">{$page_no}</a>
			</li>
			<li cond="$page==$page_no" class="page-item active">
				<a class="page-link" href="{getUrl('page',$page_no)}">{$page_no}</a>
			</li>
		</block>
		<li class="page-item pagination-next">
			<a href="{getUrl('page',$page_navigation->last_page)}" class="page-link">{$lang->last_page} &raquo;</a>
		</li>
	</ul>
<!--@endif-->

<include target="footer.html" />
