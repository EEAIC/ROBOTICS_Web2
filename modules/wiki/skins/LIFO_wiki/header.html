<!--// bootstrapCDN 사용 -->
<block cond="$module_info->use_bootstrapCDN == 'Y'">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</block>

<!--// browser_title 제거  -->
<block cond="$module_info->remove_browser_title == 'Y'">
    {@ $module_info->browser_title = '';}
</block>

<!--// github flavored markdown 사용-->
<block cond="$module_info->use_gfm == 'Y'">
    <load target="css/github-markdown-css/github-markdown.css"/>
</block>


<load target="css/common.css" />

<load target="css/jquery.treeview.css" cond="$module_info->menu_style == 'classic'" />
<load target="js/jquery.cookie.js" />
<load target="js/jquery.treeview.js" />


<load target="css/wiki.css" />
<load target="js/wiki.js" />
<load target="js/diff.js" cond="$use_history != 'N' && $act == 'dispWikiHistory'" />
<script>
	jQuery(document).ready(function($){
		$(".message.info").delay(1500).fadeOut('slow');
    });
</script>

<!--// 사용자 입력 헤더  -->
{$module_info->header_text}


<div class="wiki">
    <div class="wkTitle">
        <nav class="navbar navbar-expand-lg navbar-dark mb-2" style="background-color: #008275;">
            <block cond="$module_info->main_title">
                <a id="test" class="navbar-brand" href="{getUrl('','mid',$mid,'listStyle',$listStyle)}"  title="{$module_info->comment}">{$module_info->main_title} <em cond="$module_info->sub_title">{$module_info->sub_title}</em></a>
            </block>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#wikiNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="wikiNav">
                <span class="navbar-nav mr-auto">
                    <a class="nav-item nav-link" href="{getUrl('act','dispWikiContent','entry','','document_srl','')}">{$lang->home_page}</a>
                    <a class="nav-item nav-link" href="{getUrl('act','dispWikiTitleIndex','entry','','document_srl','')}">{$lang->cmd_view_document_list}</a>
                    <a class="nav-item nav-link" href="{getUrl('act','dispWikiTreeIndex','entry','','document_srl','')}">{$lang->cmd_view_document_tree}</a>
                    <a class="nav-item nav-link" href="{getUrl('','act','dispWikiEditPage','entry','','document_srl','','mid',$mid,'vid',$vid)}">{$lang->new_document}</a>
                </span>
                
                <form action="{getUrl()}" method="post" class="wkSearch form-inline">
                    <input type="hidden" name="mid" value="{$mid}" />
                    <input type="hidden" name="vid" value="{$vid}" />
                    <input type="hidden" name="act" value="dispWikiContent" />
                    <input type="text" class="iText form-control mr-sm-2" name="entry" />
                    <div class="btn-group col col-sm-auto px-0" role="group">
                        <input class="btn btn-outline-light mt-2 my-sm-0 w-100" type="submit" value="{$lang->cmd_search}" />
                        <a class="btn btn-outline-light mt-2 my-sm-0 w-100" cond="$grant->manager" href="{getUrl('act','dispWikiAdminInsertWiki')}">{$lang->cmd_setup}</a>
                    </div>
                </form>
            </div>
        </nav>
    </div>
   


    <div class="">
        <div class="row mx-0 mx-lg-n1">
            <div class="col-lg-3 px-0 px-lg-1 order-lg-last">
                <div class="area p-2 mb-2">
                    <include target="left_side_tree_list.html" />
                </div>
            </div>
            <div class=" col-lg-9 px-0 px-lg-1  order-lg-first">
                <div>
                    <div class="area p-2 mb-2">
                        <div cond="$XE_VALIDATOR_MESSAGE && $XE_VALIDATOR_ID == 'modules/wiki/skins/xe_wiki'" class="message {$XE_VALIDATOR_MESSAGE_TYPE} alert alert-info mb-2">
                            <span>{$XE_VALIDATOR_MESSAGE}</span>
                        </div>

                        <!--// 문서가 존재할 경우  -->
                        <!--@if($oDocument && $oDocument->isExists())-->
                        <div class="wikiRead">
                            <div class="wkReadHeader">
                                <div class="titleArea">
                                    <!--@if(!$history && ($oDocument->isExists()||$use_history != 'N'))-->
                                    <div class="command col col-sm-auto px-0 mb-2 mb-sm-auto">
                                        <span class="btn-group w-100">
                                            {@
                                                $oDocumentModel = getModel('document');
                                                $entry = $oDocumentModel->getAlias($oDocument->get('document_srl'));
                                            }
                                            <a class="btn btn-outline-secondary btn-sm" href="{getUrl('', 'module', 'document', 'act', 'dispDocumentPrint', 'document_srl', $oDocument->document_srl)}" target="_blank">{$lang->cmd_print}</a>
                                            <a cond="$is_logged" class="btn btn-outline-secondary btn-sm" href="#" onclick="doCallModuleAction('member','procMemberScrapDocument', {$oDocument->document_srl}); return false; ">{$lang->cmd_scrap}</a>
                                            <button cond="$oDocument->isExists() && $grant->delete_document" type="button" class="btn btn-outline-secondary btn-sm" onclick="if(confirm('{$lang->confirm_delete}')) { doDeleteWiki('{$oDocument->document_srl}'); }">{$lang->cmd_delete}</button>
                                            <a cond="$oDocument->isExists()&& $act!='dispWikiEditPage' && $grant->write_document" class="btn btn-outline-secondary  btn-sm" href="{getUrl('act','dispWikiEditPage','entry',$entry, 'document_srl', '')}">{$lang->cmd_edit}</a>
                                            <a cond="$use_history != 'N'" href="{getUrl('act','dispWikiHistory','document_srl',$oDocument->document_srl,'history_srl','')}" class="btn btn-outline-secondary  btn-sm">{$lang->histories}</a>
                                            <block>
                                                <div class="btn-group" role="group">
                                                    <button id="btnGroupDrop1" type="button" class="btn btn-outline-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                        {$lang->cmd_management}
                                                    </button>
                                                    <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                                                        <a class="dropdown-item" href="#">Dropdown link</a>
                                                        <a class="dropdown-item" href="#">Dropdown link</a>
                                                    </div>
                                                </div>
                                            </block>
                                            
                                        </span>
                                    </div>
                                    <!--@else-->
                                    <div class="command">
                                        <block cond="$history">{$lang->notice_old_revision}</block>
                                        <a href="{getUrl('act','','history_srl','')}" class="btn btn-outline-secondary btn-sm">{$lang->cmd_back}</a>
                                    </div>
                                    <!--@end-->
                        

                                    <h3 class="title">
                                        <a class="text-reset" href="{$oDocument->getPermanentUrl()}">{$oDocument->getTitle()}</a>
                                    </h3>


                                    <div class="sum clearfix mb-2">
                                        <span class="date float-right">                       
                                            <span class="ipAddress" cond="$grant->manager || $module_info->display_ip_address!='N'">{$oDocument->getIpaddress()} | </span>                        
                                            
                                            <!--@if($history)-->
                                            <strong>{zdate($history->regdate, 'Y.m.d')}</strong> {zdate($history->regdate, 'H:i:s')}
                                            <!--@else-->
                                            <strong>{$oDocument->getUpdate('Y.m.d')}</strong> {$oDocument->getUpdate('H:i:s')} 
                                            <!--@end-->
                                        </span>                  
                                    </div>
                                </div>

                                <div class="visitLog alert alert-secondary" cond="$visit_log">
                                    {@ $bFirst = true; }
                                    <block loop="$visit_log=>$_entry">
                                        <!--@if(!$bFirst)--> > <!--@else-->{@ $bFirst = false; }<!--@end--> 
                                        <a class="alert-link" href="{getUrl('entry',$_entry,'document_srl','')}">{htmlspecialchars($_entry)}</a>
                                    </block>
                                </div>
                                

                            
                            </div>
                        </div>

                        <!--// 문서가 존재하지 않을 경우  -->
                        <!--@elseif($oDocument) -->
                        <div class="wikiRead" cond="$oDocument->get('title')">
                            <div class="wkReadHeader">
                                <div class="titleArea">
                                    <!-- Needs to access title with get('title') instead of getTitle() because oDocument is seen as invalid when doc_srl is 0 -->
                                    <h3 class="title">{$oDocument->get('title')}</h3>
                                </div>
                            </div>
                        </div>
                        <!--@end-->
